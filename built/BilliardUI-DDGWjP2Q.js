import{a as e,u as t,b as n,j as s}from"./index-B3P81YRm.js";import{c as l,ab as a,a9 as r,am as i,al as c,an as o,ac as u,aa as h,a3 as d,ae as x,X as m}from"./react-vendor-B6_iA-Ai.js";import"./socket-DRbsQkF5.js";import{T as g,a as f,P as b,b as v,B as p,e as y}from"./types-RSMP8Pgm.js";import"./zustand-DzQBgWHa.js";function w({game:w}){const j=w,[N,k]=l.useState(j.getState()),{username:M}=e(),{ti:S,ts:P}=t(),{confirm:C}=n(),[T,B]=l.useState(!1),R=l.useRef(null),E=l.useRef(null),A=l.useRef(j.getState().balls),L=l.useRef(new Map),I=l.useRef([]),F=l.useRef(new Set),[D,Y]=l.useState(!1),[W,q]=l.useState(0),[H,X]=l.useState(0),[O,z]=l.useState(null),[G,K]=l.useState(1),[U,$]=l.useState(!1),[Q,J]=l.useState("drag"),[V,Z]=l.useState(!1),_=j.isMyTurn(),ee=l.useRef(()=>{}),te=l.useRef(!1);te.current=D;const ne=l.useRef(0);ne.current=W;const se=l.useRef(0);se.current=H,l.useEffect(()=>{const e=()=>{if(E.current){const e=E.current.clientWidth-16,t=.8*window.innerHeight,n=window.innerWidth*(U?.6:.8),s=U?f:g,l=U?g:f,a=Math.min(e,n)/s,r=t/l,i=Math.min(1,a,r);K(i)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[U]);const le=l.useRef({isAiming:D,aimAngle:W,aimPower:H,mousePos:O});le.current={isAiming:D,aimAngle:W,aimPower:H,mousePos:O};const ae=l.useRef(G);ae.current=G;const re=l.useRef(U);re.current=U;const ie=l.useRef(Q);ie.current=Q;const ce=l.useRef(V);ce.current=V;const oe=l.useRef(null),ue=l.useRef(new Map);l.useEffect(()=>{const e=new Map,t=e=>{const t=document.createElement("canvas"),n=2*p;t.width=n,t.height=n;const s=t.getContext("2d");if(!s)return t;const l=p,a=y[e]||"#FFF";return s.fillStyle=a,s.beginPath(),s.arc(l,l,p,0,2*Math.PI),s.fill(),e>=9&&e<=15&&(s.fillStyle="white",s.beginPath(),s.arc(l,l,.7*p,0,2*Math.PI),s.fill()),0!==e&&(s.fillStyle=e>=9&&e<=15?"black":"white",s.font=`bold ${p}px Arial`,s.textAlign="center",s.textBaseline="middle",s.save(),s.translate(l,l),U&&s.rotate(Math.PI/2),s.fillText(e.toString(),0,0),s.restore()),s.fillStyle="rgba(255, 255, 255, 0.3)",s.beginPath(),s.arc(l-.3*p,l-.3*p,.3*p,0,2*Math.PI),s.fill(),t};for(let n=0;n<=15;n++)e.set(n,t(n));ue.current=e},[U]),l.useEffect(()=>{oe.current||(oe.current=document.createElement("canvas"));const e=oe.current;e.width=g,e.height=f;const t=e.getContext("2d");if(t){t.fillStyle="#1a472a",t.fillRect(0,0,g,f),t.strokeStyle="#5d3a1a",t.lineWidth=20,t.strokeRect(10,10,g-20,f-20),t.fillStyle="#111";for(const e of b)t.beginPath(),t.arc(e.x,e.y,v,0,2*Math.PI),t.fill()}},[]);const he=l.useCallback((e,t,n)=>{e.fillStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.arc(t.x+2,t.y+2,p,0,2*Math.PI),e.fill(),n&&(e.save(),e.globalAlpha=.6,e.fillStyle=n,e.beginPath(),e.arc(t.x,t.y,p+7,0,2*Math.PI),e.fill(),e.restore());const s=ue.current.get(t.id);s&&e.drawImage(s,t.x-p,t.y-p)},[]),de=l.useCallback(()=>{const e=R.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const n=ae.current,{isAiming:s,aimAngle:l,aimPower:a}=le.current,r=re.current;e.width=(r?f:g)*n,e.height=(r?g:f)*n,t.save(),t.scale(n,n),r&&(t.translate(0,g),t.rotate(-Math.PI/2)),oe.current?t.drawImage(oe.current,0,0):(t.fillStyle="#1a472a",t.fillRect(0,0,g,f)),L.current.forEach((e,n)=>{if(e.length<2)return;const s=y[n]||"#FFF";for(let l=0;l<e.length;l++){const n=e[l],a=l/e.length*.4;t.beginPath(),t.arc(n.x,n.y,p,0,2*Math.PI),t.fillStyle=s,t.globalAlpha=a,t.fill(),t.fillStyle="rgba(255, 255, 255, 0.3)",t.beginPath(),t.arc(n.x-.3*p,n.y-.3*p,.3*p,0,2*Math.PI),t.globalAlpha=a,t.fill()}t.globalAlpha=1});const i=j.getState(),c=j.getMySlot(),o=c===i.currentTurn&&"playing"===i.gamePhase&&!i.isSimulating,u=c?i.players[c].ballType:null,h=u&&0===A.current.filter(e=>!e.pocketed&&e.type===u).length;for(const g of A.current){if(g.pocketed)continue;let e;o&&(0===g.id?e="#00ff88":u&&(h&&8===g.id?e="#ffcc00":g.type===u&&(e="#00aaff"))),he(t,g,e)}const d=A.current.find(e=>0===e.id&&!e.pocketed);if(s&&d&&(a>0||"slider"===ie.current)){let e=d.x,n=d.y,s=l,i=2e3;const c=4;t.beginPath(),t.moveTo(e,n);for(let l=0;l<c;l++){let a=i,c={x:e+Math.cos(s)*a,y:n+Math.sin(s)*a},o=null,u=null,h={x:0,y:0};const d=Math.cos(s),x=Math.sin(s);if(d>0){const t=(g-p-e)/d;t<a&&(a=t,o="wall",h={x:-1,y:0},c={x:g-p,y:n+t*x})}else{const t=(p-e)/d;t<a&&(a=t,o="wall",h={x:1,y:0},c={x:p,y:n+t*x})}if(x>0){const t=(f-p-n)/x;t<a&&(a=t,o="wall",h={x:0,y:-1},c={x:e+t*d,y:f-p})}else{const t=(p-n)/x;t<a&&(a=t,o="wall",h={x:0,y:1},c={x:e+t*d,y:p})}for(const t of A.current){if(0===t.id||t.pocketed)continue;if(Math.abs(t.x-e)>a&&Math.abs(t.y-n)>a)continue;const s=e-t.x,l=n-t.y,r=2*(d*s+x*l),i=r*r-4*(s*s+l*l-4*p*p);if(i>=0){const s=(-r-Math.sqrt(i))/2,l=(-r+Math.sqrt(i))/2;let h=-1;s>.001?h=s:l>.001&&(h=l),h>0&&h<a&&(a=h,c={x:e+h*d,y:n+h*x},o="ball",u=t)}}if(t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.setLineDash([5,5]),t.lineTo(c.x,c.y),t.stroke(),t.beginPath(),t.moveTo(c.x,c.y),t.save(),t.beginPath(),t.arc(c.x,c.y,p,0,2*Math.PI),t.fillStyle="rgba(255, 255, 255, 0.2)",t.fill(),t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1,t.setLineDash([]),t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.8)",t.font="10px Arial",t.textAlign="center",t.textBaseline="middle",r?(t.save(),t.translate(c.x,c.y),t.rotate(Math.PI/2),t.fillText((l+1).toString(),0,0),t.restore()):t.fillText((l+1).toString(),c.x,c.y),t.restore(),"ball"===o&&u){const e=Math.atan2(u.y-c.y,u.x-c.x);t.strokeStyle="rgba(255, 255, 255, 0.8)",t.lineWidth=2,t.setLineDash([]),t.beginPath(),t.moveTo(u.x,u.y),t.lineTo(u.x+75*Math.cos(e),u.y+75*Math.sin(e)),t.stroke();break}if("wall"!==o)break;{const t=.7;let l=Math.cos(s),r=Math.sin(s);if(0!==h.x?l=-l*t:r=-r*t,s=Math.atan2(r,l),e=c.x+.1*h.x,n=c.y+.1*h.y,i-=a,i<=0)break}}const o=200,u=p+5+50*a,h=d.x-Math.cos(l)*u,x=d.y-Math.sin(l)*u,m=h-Math.cos(l)*o,b=x-Math.sin(l)*o;t.strokeStyle="#8B4513",t.lineWidth=6,t.lineCap="round",t.beginPath(),t.moveTo(h,x),t.lineTo(m,b),t.stroke(),t.fillStyle="#E6D5B8",t.beginPath(),t.arc(h,x,4,0,2*Math.PI),t.fill()}const x=performance.now(),m=[];for(const g of I.current){const e=(x-g.startTime)/g.duration;if(e<1){m.push(g);for(let n=0;n<5;n++){const s=Math.max(0,e-.15*n);if(s>0&&s<1){const e=v+40*s,n=.6*(1-s);t.strokeStyle="white",t.globalAlpha=n,t.lineWidth=3-2*s,t.beginPath(),t.arc(g.x,g.y,e,0,2*Math.PI),t.stroke()}}t.globalAlpha=1}}I.current=m,t.restore()},[he]);ee.current=de;const xe=l.useRef(null),me=l.useCallback(()=>{if(xe.current)return;const e=()=>{let t=!1;const n=A.current;for(const e of n){const n=L.current.get(e.id)||[];Math.sqrt(e.vx*e.vx+e.vy*e.vy)>.05&&!e.pocketed?(t=!0,n.push({x:e.x,y:e.y}),n.length>20&&n.shift(),L.current.set(e.id,n)):n.length>0&&(t=!0,n.shift(),0===n.length?L.current.delete(e.id):L.current.set(e.id,n))}if(I.current.length>0&&(t=!0),!t){n.some(e=>!e.pocketed&&(Math.abs(e.vx)>.05||Math.abs(e.vy)>.05))&&(t=!0)}ee.current(),xe.current=t?requestAnimationFrame(e):null};xe.current=requestAnimationFrame(e)},[]);l.useEffect(()=>{de()},[de,N,D,W,H,G]),l.useEffect(()=>{const e=j.onUpdate(e=>{k(e),A.current=e.balls,("waiting"===e.gamePhase||1===e.currentTurn&&"playing"===e.gamePhase&&!e.lastShot)&&L.current.clear(),e.isSimulating?me():ee.current()});return j.onFrame(e=>{let t=!1;const n=new Set(e.filter(e=>e.pocketed).map(e=>e.id));for(const s of e){if(s.pocketed&&!F.current.has(s.id))for(const e of b){const n=s.x-e.x,l=s.y-e.y;if(n*n+l*l<(2*v)**2){I.current.push({x:e.x,y:e.y,color:y[s.id]||"#FFF",startTime:performance.now(),duration:2e3}),t=!0;break}}!s.pocketed&&(Math.abs(s.vx)>.01||Math.abs(s.vy)>.01)&&(t=!0)}F.current=n,A.current=e,t?me():xe.current||ee.current()}),()=>{e()}},[j,me]),l.useEffect(()=>()=>{xe.current&&cancelAnimationFrame(xe.current)},[]);const ge=l.useCallback((e,t)=>{const n=R.current;if(!n)return null;const s=n.getBoundingClientRect(),l=(e-s.left)/G,a=(t-s.top)/G;return U?{x:g-a,y:l}:{x:l,y:a}},[G,U]),fe=l.useCallback((e,t)=>{const n=A.current.find(e=>0===e.id&&!e.pocketed);if(!n)return;const s=ge(e,t);if(s)if(z(s),"slider"===ie.current){const e=Math.atan2(s.y-n.y,s.x-n.x);q(e)}else{const e=Math.atan2(s.y-n.y,s.x-n.x)+Math.PI;q(e);const t=s.x-n.x,l=s.y-n.y,a=Math.sqrt(t*t+l*l),r=Math.min(1,a/200);X(r)}},[ge]),be=l.useCallback(()=>{"drag"===ie.current?se.current>.05?(L.current.clear(),j.shoot(ne.current,se.current),Y(!1),X(0),z(null)):(Y(!1),z(null)):Z(!1)},[j]);l.useEffect(()=>{const e=e=>{te.current&&("slider"!==ie.current||ce.current)&&fe(e.clientX,e.clientY)},t=()=>{te.current&&be()},n=e=>{if(te.current&&e.touches.length>0){if(!te.current)return;if("slider"===ie.current&&!ce.current)return;fe(e.touches[0].clientX,e.touches[0].clientY)}},s=()=>{te.current&&be()};return document.addEventListener("mousemove",e,{passive:!1}),document.addEventListener("mouseup",t),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",s),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",s)}},[fe,be]),l.useEffect(()=>{const e=R.current;if(!e)return;const t=t=>{if(!j.isMyTurn()||j.getState().isSimulating)return;const n=A.current.find(e=>0===e.id&&!e.pocketed);if(!n)return;if(0===t.touches.length)return;const s=t.touches[0].clientX,l=t.touches[0].clientY,a=e.getBoundingClientRect(),r=ae.current,i=re.current,c=ie.current,o=(s-a.left)/r,u=(l-a.top)/r;let h=o,d=u;i&&(h=g-u,d=o);let x=!1;if("slider"===c)x=!0;else{const e=h-n.x,t=d-n.y;Math.sqrt(e*e+t*t)<3*p&&(x=!0)}x&&(t.preventDefault(),Y(!0),"slider"===c&&Z(!0),z({x:h,y:d}),fe(s,l))},n=e=>{te.current&&("slider"!==ie.current||ce.current)&&e.preventDefault()};return e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",n,{passive:!1}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n)}},[j,fe]);const ve=e=>{const t=N.players[e];return t.id?"BOT"===t.id?"Bot ü§ñ":t.id===j.userId?M||S({en:"You",vi:"B·∫°n"}):t.username||S({en:"Player",vi:"Ng∆∞·ªùi ch∆°i"})+" "+e:S({en:"(waiting...)",vi:"(ƒëang ch·ªù...)"})},pe=e=>{const t=N.players[e].ballType;return t?S("solid"===t?{en:"(Solids 1-7)",vi:"(Tr∆°n 1-7)"}:{en:"(Stripes 9-15)",vi:"(S·ªçc 9-15)"}):""};return s.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 w-full max-w-4xl mx-auto pb-12",ref:E,children:[s.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-[500px]",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Players"}),[1,2].map(e=>{const t=N.players[e],n=N.currentTurn===e&&"playing"===N.gamePhase,l=t.id===j.userId,a="BOT"===t.id;return s.jsxs("div",{className:`\n                flex items-center justify-between p-3 rounded-lg\n                ${n?"bg-slate-600 ring-2 ring-blue-400":"bg-slate-700"}\n              `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full "+(1===e?"bg-blue-500":"bg-red-500")}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-white font-medium",children:[ve(e),l&&t.id&&S({en:" (You)",vi:" (B·∫°n)"})]}),s.jsx("span",{className:"text-gray-400 text-sm ml-2",children:pe(e)})]})]}),a&&j.isHost&&"waiting"===N.gamePhase&&s.jsx("button",{onClick:()=>j.removeBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:S({en:"Remove",vi:"X√≥a"})}),!t.id&&j.isHost&&2===e&&"waiting"===N.gamePhase&&s.jsxs("button",{onClick:()=>j.addBot(),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors flex items-center gap-1",children:[s.jsx(r,{className:"w-3 h-3"})," ",S({en:"Add Bot",vi:"Th√™m Bot"})]})]},e)})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{className:"flex items-center justify-center p-3 bg-slate-700 hover:bg-slate-600 rounded-full transition-colors",onClick:()=>$(!U),children:[s.jsx(i,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"text-white text-sm ml-2",children:S({en:"Rotate table",vi:"Xoay b√†n"})})]}),s.jsxs("button",{className:"flex items-center justify-center p-3 bg-slate-700 hover:bg-slate-600 rounded-full transition-colors",onClick:()=>J("drag"===Q?"slider":"drag"),title:S({en:"Switch Control Mode",vi:"ƒê·ªïi ki·ªÉu hi·ªán khi·ªÉn"}),children:["drag"===Q?s.jsx(c,{className:"w-5 h-5 text-white"}):s.jsx(o,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"text-white text-sm ml-2",children:S("drag"===Q?{en:"Drag Mode",vi:"K√©o th·∫£"}:{en:"Slider Mode",vi:"Thanh l·ª±c"})})]})]}),"playing"===N.gamePhase&&!N.winner&&s.jsx("div",{className:"text-lg text-gray-400",children:N.isSimulating?s.jsx("span",{className:"text-yellow-400",children:S({en:"Balls in motion...",vi:"B√≥ng ƒëang lƒÉn..."})}):_?s.jsxs("span",{className:"text-green-400 flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5"}),S("drag"===Q?{en:"Your turn! Click near the cue ball and drag to aim.",vi:"L∆∞·ª£t c·ªßa b·∫°n! Nh·∫•p v√†o b√≥ng tr·∫Øng v√† k√©o ƒë·ªÉ ng·∫Øm."}:{en:"Your turn! Click to aim, set power, then Shoot.",vi:"L∆∞·ª£t c·ªßa b·∫°n! Ch·ªçn h∆∞·ªõng, ch·ªânh l·ª±c, r·ªìi b·∫•m B·∫ÆN."})]}):s.jsx("span",{children:S({en:"Waiting for opponent...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß..."})})}),N.turnMessage&&s.jsx("div",{className:"text-yellow-400 text-sm",children:N.turnMessage}),s.jsxs("div",{className:"relative bg-slate-800 p-2 rounded-xl shadow-2xl overflow-hidden",children:[s.jsx("canvas",{ref:R,width:g*G,height:f*G,className:"rounded-lg cursor-crosshair block",style:{touchAction:"none"},onMouseDown:e=>{if(!_||N.isSimulating)return;const t=A.current.find(e=>0===e.id&&!e.pocketed);if(!t)return;const n="touches"in e?e.touches[0].clientX:e.clientX,s="touches"in e?e.touches[0].clientY:e.clientY,l=ge(n,s);if(!l)return;let a=!1;if("slider"===Q)a=!0;else{const e=l.x-t.x,n=l.y-t.y;Math.sqrt(e*e+n*n)<5*p&&(a=!0)}a&&(e.preventDefault(),Y(!0),"slider"===Q&&Z(!0),fe(n,s))},onMouseMove:e=>{if(!D)return;if("slider"===Q&&!V)return;e.preventDefault();const t="touches"in e?e.touches[0].clientX:e.clientX,n="touches"in e?e.touches[0].clientY:e.clientY;fe(t,n)}}),(N.winner||"waiting"===N.gamePhase)&&s.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-black/60 backdrop-blur-[2px] rounded-lg animate-fade-in",children:[N.winner&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-3xl font-bold text-green-400 mb-6 drop-shadow-lg animate-bounce",children:["üèÜ ",ve(N.winner)," ",S({en:"wins!",vi:"th·∫Øng!"})]}),j.isHost?s.jsxs("button",{onClick:()=>j.requestReset(),className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-full text-white font-bold text-lg transition-transform hover:scale-105 flex items-center gap-2 shadow-lg",children:[s.jsx(h,{className:"w-6 h-6"}),S({en:"Play Again",vi:"Ch∆°i l·∫°i"})]}):s.jsx("div",{className:"text-slate-300 animate-pulse",children:S({en:"Waiting for host to restart...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng ch∆°i l·∫°i..."})})]}),!N.winner&&"waiting"===N.gamePhase&&s.jsx(s.Fragment,{children:j.isHost?j.canStartGame()?s.jsxs("button",{onClick:()=>j.startGame(),className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-full text-white font-bold text-lg transition-transform hover:scale-105 flex items-center gap-2 shadow-lg",children:[s.jsx(d,{className:"w-6 h-6"}),S({en:"Start Game",vi:"B·∫Øt ƒë·∫ßu"})]}):s.jsx("div",{className:"flex flex-col items-center gap-3",children:s.jsx("div",{className:"text-lg text-slate-300 font-medium",children:S({en:"Waiting for opponent...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß..."})})}):s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-slate-500 border-t-white rounded-full animate-spin"}),s.jsx("div",{className:"text-lg text-slate-300 font-medium",children:S({en:"Waiting for host to start...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng b·∫Øt ƒë·∫ßu..."})})]})})]})]}),D&&"drag"===Q&&s.jsxs("div",{className:"w-full max-w-xs",children:[s.jsxs("div",{className:"text-sm text-gray-400 mb-1",children:[S({en:"Power",vi:"L·ª±c"}),": ",Math.round(100*H),"%"]}),s.jsx("div",{className:"h-3 bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full transition-all duration-75",style:{width:100*H+"%",background:"linear-gradient(90deg, #22c55e, #eab308, #ef4444)"}})})]}),"slider"===Q&&s.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-md p-4 bg-slate-800/80 rounded-xl backdrop-blur-sm border border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white font-medium",children:S({en:"Power",vi:"L·ª±c b·∫Øn"})}),s.jsxs("span",{className:"font-bold "+(H>.8?"text-red-500":H>.5?"text-yellow-500":"text-green-500"),children:[Math.round(100*H),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:H,disabled:!_||N.isSimulating,onChange:e=>{X(parseFloat(e.target.value)),D||Y(!0)},className:"w-full h-4 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),s.jsx("button",{onClick:()=>{H>.05&&(L.current.clear(),j.shoot(W,H),Y(!1),X(0),z(null))},disabled:H<.05||!_||N.isSimulating,className:"\n                    w-full py-3 rounded-lg font-bold text-lg shadow-lg transition-all\n                    disabled:bg-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed\n                    bg-red-600 hover:bg-red-500 text-white hover:scale-[1.02] active:scale-[0.98]\n                ",children:S({en:"SHOOT!",vi:"B·∫ÆN!"})})]}),j.isHost&&"waiting"!==N.gamePhase&&s.jsxs("button",{onClick:async()=>{await C(P({en:"Are you sure you want to reset the game?",vi:"B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ch∆°i l·∫°i kh√¥ng?"}),P({en:"Reset game",vi:"Ch∆°i l·∫°i"}))&&j.requestReset()},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-full ",children:[s.jsx(h,{className:"w-4 h-4"}),S({en:"New game",vi:"Ch∆°i l·∫°i"})]}),s.jsx("button",{onClick:()=>B(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:P({en:"Game Rules",vi:"Lu·∫≠t ch∆°i"}),children:s.jsx(x,{size:24})}),T&&a.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-100 flex items-center justify-center p-4 text-left",children:s.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl relative",children:[s.jsxs("div",{className:"flex justify-between sticky top-0 p-4 pr-2 bg-slate-900 border-b border-slate-800",children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(x,{className:"w-6 h-6 text-yellow-500"}),S({en:"Game Rules: Billiard (8-Ball)",vi:"Lu·∫≠t Ch∆°i: Bi-a (8 B√≥ng)"})]}),s.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:s.jsx(m,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-6 text-slate-300 leading-relaxed font-sans text-sm md:text-base",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:S({en:"Objective",vi:"M·ª•c ti√™u"})}),s.jsx("p",{children:S({en:"Pocket all of your assigned balls (Solids or Stripes) and then pocket the 8-Ball to win.",vi:"ƒê∆∞a t·∫•t c·∫£ c√°c bi m·ª•c ti√™u c·ªßa b·∫°n (bi Tr∆°n ho·∫∑c bi S·ªçc) v√†o l·ªó v√† cu·ªëi c√πng l√† bi s·ªë 8 ƒë·ªÉ chi·∫øn th·∫Øng."})})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:S({en:"Key Rules",vi:"Quy T·∫Øc Ch√≠nh"})}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:S({en:"First ball pocketed determines your group (Solids 1-7 or Stripes 9-15).",vi:"Bi ƒë·∫ßu ti√™n v√†o l·ªó s·∫Ω quy·∫øt ƒë·ªãnh nh√≥m bi c·ªßa b·∫°n (Tr∆°n 1-7 ho·∫∑c S·ªçc 9-15)."})}),s.jsx("li",{children:S({en:"You must hit your own ball group first.",vi:"Ban ph·∫£i ch·∫°m v√†o bi thu·ªôc nh√≥m c·ªßa m√¨nh tr∆∞·ªõc."})}),s.jsx("li",{children:S({en:"Pocketing the wrong ball or scratching (white ball in pocket) is a foul.",vi:"ƒê∆∞a nh·∫ßm bi v√†o l·ªó ho·∫∑c l√†m r∆°i bi tr·∫Øng l√† ph·∫°m l·ªói."})}),s.jsxs("li",{children:[s.jsx("strong",{className:"text-red-400",children:S({en:"Do NOT pocket the 8-Ball early!",vi:"KH√îNG ƒë∆∞·ª£c l√†m r∆°i bi s·ªë 8 s·ªõm!"})})," ",S({en:"You lose instantly if the 8-Ball enters a pocket before your other balls are cleared.",vi:"B·∫°n s·∫Ω thua ngay l·∫≠p t·ª©c n·∫øu bi s·ªë 8 v√†o l·ªó tr∆∞·ªõc khi b·∫°n d·ªçn s·∫°ch c√°c bi kh√°c."})]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-2",children:S({en:"Controls",vi:"ƒêi·ªÅu Khi·ªÉn"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("strong",{className:"text-blue-400",children:S({en:"Drag Mode (Default):",vi:"Ch·∫ø ƒë·ªô K√©o (M·∫∑c ƒë·ªãnh):"})}),s.jsx("p",{className:"ml-2 text-slate-400 text-sm",children:S({en:"Click/Touch near the cue ball and pull back to aim and set power. Release to shoot.",vi:"Nh·∫•p/Ch·∫°m g·∫ßn bi tr·∫Øng v√† k√©o v·ªÅ ph√≠a sau ƒë·ªÉ ng·∫Øm v√† ch·ªânh l·ª±c. Th·∫£ tay ƒë·ªÉ b·∫Øn."})})]}),s.jsxs("div",{children:[s.jsx("strong",{className:"text-blue-400",children:S({en:"Slider Mode:",vi:"Ch·∫ø ƒë·ªô Thanh l·ª±c:"})}),s.jsx("p",{className:"ml-2 text-slate-400 text-sm",children:S({en:"Click anywhere to place aim stick. Use the slider below to set power, then press SHOOT.",vi:"Nh·∫•p b·∫•t k·ª≥ ƒë√¢u ƒë·ªÉ ƒë·∫∑t g·∫≠y ng·∫Øm. D√πng thanh tr∆∞·ª£t b√™n d∆∞·ªõi ƒë·ªÉ ch·ªânh l·ª±c, sau ƒë√≥ b·∫•m n√∫t B·∫ÆN."})})]})]})]})]})]})}),document.body)]})}export{w as default};
