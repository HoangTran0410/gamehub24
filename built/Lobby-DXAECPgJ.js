import{u as e,a as s,g as r,j as t}from"./index-CYYyLRSM.js";import{b as a,G as i,P as l,U as o,u as n,T as d}from"./react-vendor-DJuGDrwg.js";import{u as c,g as m}from"./registry-C4xPWhbb.js";import{u as x}from"./alertStore-BNMfrhCk.js";import"./socket-DRbsQkF5.js";import"./zustand-DbB79pZ7.js";import"./chess-DTd62Tay.js";function p(){const{username:n}=e(),{isConnected:d}=s(),{publicRooms:x,setPublicRooms:p}=c(),[b,y]=a.useState(null),[f,j]=a.useState(!1);a.useEffect(()=>{const e=r();return e.emit("room:list",e=>{p(e)}),e.on("room:list:update",e=>{p(e)}),()=>{e.off("room:list:update")}},[p]);return t.jsxs("div",{className:"min-h-screen bg-background-primary",children:[t.jsx("nav",{className:"fixed top-4 left-4 right-4 z-50",children:t.jsx("div",{className:"max-w-7xl mx-auto glass-card rounded-2xl px-4 md:px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(i,{className:"w-8 h-8 text-primary"}),t.jsx("span",{className:"text-xl font-display text-text-primary",children:"GameHub"})]}),t.jsxs("div",{onClick:()=>j(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all cursor-pointer "+(d?"":"opacity-50"),title:d?"Connected":"Disconnected",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(d?"bg-green-500 animate-pulse":"bg-red-500")}),t.jsx("span",{className:"text-sm font-medium text-text-primary",children:n})]})]})})}),t.jsx("main",{className:"pt-32 px-2 md:px-4 pb-16",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-16",children:[t.jsx("h2",{className:"text-5xl font-display text-text-primary mb-4 neon-glow",children:"Play Together, Anywhere"}),t.jsx("p",{className:"text-xl text-text-secondary mb-8",children:"Join multiplayer games with friends in real-time"}),t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsxs("button",{onClick:()=>y(""),className:"px-8 py-3 bg-primary hover:bg-primary-light text-white font-display rounded-xl shadow-lg shadow-primary/50 hover:shadow-xl hover:shadow-primary/70 transition-all duration-200 cursor-pointer flex items-center gap-2",children:[t.jsx(l,{className:"w-5 h-5"}),"Create Room"]}),t.jsxs("button",{onClick:()=>{const e=document.getElementById("public-rooms-section");e&&e.scrollIntoView({behavior:"smooth"})},className:"px-8 py-3 bg-white/5 hover:bg-white/10 text-white font-display rounded-xl border border-white/10 hover:border-white/20 transition-all duration-200 cursor-pointer flex items-center gap-2 backdrop-blur-sm",children:[t.jsx(o,{className:"w-5 h-5"}),"Public Rooms (",x.length,")"]})]})]}),t.jsxs("section",{className:"mb-16",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(i,{className:"w-6 h-6 text-primary"}),t.jsx("h3",{className:"text-2xl font-display text-text-primary",children:"Available Games"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m().map(e=>{const s=e.icon;return t.jsxs("div",{className:"glass-card rounded-2xl p-6 hover:border-primary/30 transition-all duration-200 "+(e.isAvailable?"":"opacity-50"),children:[t.jsx("div",{className:"mb-4 flex items-center justify-center",children:t.jsx(s,{className:"w-12 h-12 text-primary"})}),t.jsx("h4",{className:"font-display text-xl text-text-primary mb-2",children:e.name}),t.jsx("p",{className:"text-sm text-text-secondary mb-4",children:e.description}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-muted mb-4",children:[t.jsx(o,{className:"w-4 h-4"}),t.jsx("span",{children:e.minPlayers===e.maxPlayers?`${e.minPlayers} Players`:`${e.minPlayers}-${e.maxPlayers} Players`})]}),e.isAvailable?t.jsx("button",{onClick:()=>{return s=e.id,void y(s);var s},className:"w-full px-4 py-2 bg-primary hover:bg-primary-light text-white font-semibold rounded-lg transition-colors cursor-pointer",children:"Create Room"}):t.jsx("button",{disabled:!0,className:"w-full px-4 py-2 bg-white/5 text-text-muted font-semibold rounded-lg cursor-not-allowed",children:"Coming Soon"})]},e.id)})})]}),t.jsxs("section",{id:"public-rooms-section",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(o,{className:"w-6 h-6 text-primary"}),t.jsxs("h3",{className:"text-2xl font-display text-text-primary",children:["Public Rooms (",x.length,")"]})]}),0===x.length?t.jsx("div",{className:"glass-card rounded-2xl p-12 text-center",children:t.jsx("p",{className:"text-text-muted",children:"No public rooms available. Create one to get started!"})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(e=>t.jsx(h,{room:e},e.id))})]})]})}),null!=b&&t.jsx(u,{gameId:b,onClose:()=>y(null)}),f&&t.jsx(g,{onClose:()=>j(!1)})]})}function h({room:s}){const a=n(),{username:l}=e(),{setCurrentRoom:p}=c(),{show:h}=x(),u=s.players.find(e=>e.isHost),g=u?.username||"Unknown",b=u?.username===l,y=m().find(e=>e.id===s.gameType),f=y?.icon||i;return t.jsxs("div",{className:"glass-card rounded-xl p-4 hover:border-primary/30 transition-all duration-200 cursor-pointer group flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center shrink-0",children:t.jsx(f,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h4",{className:"font-display text-lg text-text-primary truncate transition-colors",children:s.name}),s.password&&t.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-yellow-500/20 text-yellow-500 border border-yellow-500/30 uppercase tracking-wider",children:"Private"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-text-secondary",children:[t.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary/50"}),t.jsx("span",{className:"capitalize truncate max-w-[100px]",children:y?.name||s.gameType})]}),t.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[t.jsx(o,{className:"w-3.5 h-3.5 text-text-muted"}),t.jsxs("span",{className:"truncate max-w-[120px]",children:["Host: ",g]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-text-muted",children:"â€¢"}),t.jsxs("span",{children:[s.players.length,"/",s.maxPlayers]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 sm:mt-0 w-full sm:w-auto",children:[b&&t.jsx("button",{onClick:e=>{if(e.stopPropagation(),!confirm("Are you sure you want to close this room?"))return;r().emit("room:leave",{roomId:s.id})},className:"px-3 py-2.5 bg-red-500/10 hover:bg-red-500/20 text-red-500 rounded-lg border border-red-500/20 transition-all duration-200",title:"Close Room",children:t.jsx(d,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{const e=r();if(!e)return h("Socket not connected",{type:"error"});e.emit("room:join",{roomId:s.id},e=>{e.success&&e.room?(p(e.room),a(`/room/${s.id}`)):h(e.error||"Failed to join room",{type:"error"})})},className:"flex-1 sm:flex-initial px-6 py-2.5 bg-primary hover:bg-primary-light text-white font-semibold rounded-lg shadow-lg shadow-primary/30 transition-all duration-200",children:"Join"})]})]})}function u({onClose:e,gameId:s}){const[i,l]=a.useState(""),[o,d]=a.useState(s),[p,h]=a.useState(!0),[u,g]=a.useState(""),b=n(),{setCurrentRoom:y}=c(),{show:f}=x();return t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:t.jsxs("div",{className:"bg-background-secondary border border-white/10 rounded-2xl p-8 max-w-md w-full shadow-2xl mx-4",children:[t.jsx("h2",{className:"font-display text-2xl text-text-primary mb-6",children:"Create Room"}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Room Name"}),t.jsx("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Enter room name",className:"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Game Type"}),t.jsx("select",{value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer",children:m().map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:p,onChange:e=>h(e.target.checked),className:"w-4 h-4 text-primary bg-white/5 border-white/10 rounded focus:ring-2 focus:ring-primary cursor-pointer"}),t.jsx("span",{className:"text-sm text-text-secondary",children:"Public Room"})]})}),!p&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Password"}),t.jsx("input",{type:"password",value:u,onChange:e=>g(e.target.value),placeholder:"Enter password",className:"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:e,className:"flex-1 px-4 py-2.5 bg-white/5 hover:bg-white/10 text-text-secondary rounded-lg transition-colors cursor-pointer",children:"Cancel"}),t.jsx("button",{onClick:()=>{if(!i.trim())return void f("Please enter a room name",{type:"warning"});const e=r();if(!e)return f("Socket not connected",{type:"error"});const s=m().find(e=>e.id===o);if(!s)return f("Game not found",{type:"error"});e.emit("room:create",{name:i,gameType:o,isPublic:p,password:p?void 0:u,maxPlayers:s.maxPlayers},e=>{e.success&&e.room?(y(e.room),b(`/room/${e.room.id}`)):f(e.error||"Failed to create room",{type:"error"})})},className:"flex-1 px-4 py-2.5 bg-primary hover:bg-primary-light text-white rounded-lg shadow-lg shadow-primary/30 transition-all cursor-pointer",children:"Create"})]})]})})}function g({onClose:s}){const{generateNewId:r}=e();return t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:t.jsxs("div",{className:"glass-card border border-white/10 rounded-2xl p-8 max-w-md w-full shadow-2xl animate-slideUp mx-4",children:[t.jsx("h2",{className:"font-display text-2xl text-text-primary mb-4",children:"New Identity"}),t.jsx("p",{className:"text-text-secondary mb-8",children:"Are you sure you want to generate a new random identity? The page will reload."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white/5 hover:bg-white/10 text-text-secondary rounded-lg transition-colors cursor-pointer font-medium",children:"Cancel"}),t.jsx("button",{onClick:()=>{r(),window.location.reload()},className:"flex-1 px-4 py-2.5 bg-primary hover:bg-primary-light text-white rounded-lg shadow-lg shadow-primary/30 transition-all cursor-pointer font-medium",children:"Confirm"})]})]})})}export{p as default};
