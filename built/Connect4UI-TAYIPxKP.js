import{u as e,b as s,j as t,h as n}from"./index-KFrRJnAa.js";import{b as a,c as l,ai as i,B as r,a8 as o,v as c,a2 as d,X as m,am as h}from"./react-vendor-DYZX9s3x.js";import"./BaseGame-Bx6ZleY5.js";import{C as x,b as u,R as g,a as b}from"./types-BR_cD1-k.js";import{u as p}from"./useGameState-D4aAB64x.js";import"./socket-DRbsQkF5.js";import"./zustand-ChJSfqt5.js";function f({game:f,currentUserId:w}){const v=f,[j]=p(v),[y,N]=a.useState(!1),{ti:k,ts:C}=e(),{confirm:q}=s(),P=v.getMyPlayerIndex(),G=v.isHost;if(!j)return null;const R=j.currentPlayerIndex===P;return t.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 w-full max-w-2xl mx-auto pb-16!",children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes drop {\n          0% { transform: translateY(-500%); opacity: 0.5; }\n          100% { transform: translateY(0); opacity: 1; }\n        }\n        @keyframes winner-pulse {\n          0%, 100% { transform: scale(1); opacity: 1; box-shadow: 0 0 20px rgba(255, 255, 255, 0.8); }\n          50% { transform: scale(1.05); opacity: 0.8; box-shadow: 0 0 40px rgba(255, 255, 255, 1); }\n        }\n        @keyframes winner-glow {\n          0%, 100% { filter: brightness(1); }\n          50% { filter: brightness(1.3); }\n        }\n        .animate-drop {\n          animation-name: drop;\n          animation-fill-mode: forwards;\n        }\n        .animate-winner-pulse {\n          animation: winner-pulse 1s ease-in-out infinite;\n        }\n        .animate-winner-glow {\n          animation: winner-glow 1s ease-in-out infinite;\n        }\n      "}}),t.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-slate-800 rounded-lg w-full max-w-md border border-slate-700",children:[t.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:k({en:"Players",vi:"Ng∆∞·ªùi ch∆°i"})}),j.players.map((e,s)=>{const a=j.currentPlayerIndex===s;return t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg transition-all "+(a?"bg-slate-700 ring-2 ring-blue-500 shadow-lg":"bg-slate-900 border border-slate-800"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-6 h-6 rounded-full shadow-inner "+(0===s?"bg-red-500":"bg-yellow-400")}),t.jsxs("span",{className:"font-medium "+(a?"text-white":"text-gray-400"),children:[e.username,n(e.flags,b.BOT)&&" ü§ñ"]})]}),n(e.flags,b.BOT)&&G&&t.jsx("button",{onClick:()=>v.requestRemoveBot(),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:k({en:"Remove",vi:"X√≥a"})}),G&&!e.id&&t.jsxs("button",{onClick:()=>v.requestAddBot(),className:"flex items-center gap-2 p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm",children:[t.jsx(i,{className:"w-4 h-4"}),k({en:"Add Bot",vi:"Th√™m Bot"})]})]},s)})]}),t.jsxs("div",{className:"flex gap-3",children:[j.gamePhase===x.WAITING&&t.jsxs(t.Fragment,{children:[G&&v.canStartGame()&&t.jsxs("button",{onClick:()=>v.requestStartGame(),className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-green-600/20 active:scale-95",children:[t.jsx(r,{className:"w-5 h-5 text-white"})," ",k({en:"Start Game",vi:"B·∫Øt ƒë·∫ßu"})]}),!G&&t.jsx("div",{className:"text-gray-500 font-medium italic",children:k({en:"Waiting for host to start...",vi:"ƒêang ch·ªù ch·ªß ph√≤ng b·∫Øt ƒë·∫ßu..."})})]}),j.gamePhase===x.PLAYING&&t.jsxs(t.Fragment,{children:[!j.undoRequest&&t.jsxs("button",{onClick:()=>v.requestUndo(),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-medium text-sm border border-slate-600",children:[t.jsx(o,{className:"w-4 h-4 text-gray-400"})," ",k({en:"Undo",vi:"Ho√†n t√°c"})]}),G&&t.jsxs("button",{onClick:async()=>{await q(C({en:"Reset the game?",vi:"Ch∆°i l·∫°i t·ª´ ƒë·∫ßu?"}),C({en:"Reset",vi:"Reset"}))&&v.requestNewGame()},className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-medium text-sm border border-slate-600",children:[t.jsx(c,{className:"w-4 h-4 text-gray-400"})," ",k({en:"New Game",vi:"V√°n m·ªõi"})]})]})]}),j.gamePhase===x.PLAYING&&t.jsx("div",{className:"text-lg font-semibold tracking-tight",children:R?t.jsx("span",{className:"text-blue-400 animate-pulse",children:k({en:"Your Turn!",vi:"L∆∞·ª£t c·ªßa b·∫°n!"})}):t.jsxs("span",{className:"text-gray-500",children:[k({en:"Waiting for",vi:"ƒêang ch·ªù"})," ",j.players[j.currentPlayerIndex].username,"..."]})}),j.undoRequest&&j.undoRequest.fromId!==w&&t.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 shadow-2xl max-w-sm mx-4 border border-slate-700",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:k({en:"Undo Request",vi:"Y√™u c·∫ßu ho√†n t√°c"})}),t.jsxs("p",{className:"text-gray-400 mb-6 leading-relaxed",children:[t.jsx("span",{className:"text-blue-400 font-semibold",children:j.undoRequest.fromName})," ",k({en:"wants to undo their last move.",vi:"mu·ªën ho√†n t√°c n∆∞·ªõc ƒëi v·ª´a r·ªìi."})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>v.acceptUndo(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors font-semibold",children:[t.jsx(d,{className:"w-4 h-4"})," ",k({en:"Accept",vi:"ƒê·ªìng √Ω"})]}),t.jsxs("button",{onClick:()=>v.declineUndo(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors font-semibold",children:[t.jsx(m,{className:"w-4 h-4"})," ",k({en:"Decline",vi:"T·ª´ ch·ªëi"})]})]})]})}),j.undoRequest&&j.undoRequest.fromId===w&&t.jsx("div",{className:"text-yellow-400 text-sm font-medium bg-yellow-400/10 px-3 py-1 rounded-full border border-yellow-400/20",children:k({en:"Waiting for opponent to accept undo...",vi:"ƒêang ch·ªù ƒë·ªëi th·ªß ch·∫•p nh·∫≠n ho√†n t√°c..."})}),j.gamePhase===x.ENDED&&t.jsxs("div",{className:"text-center p-6 bg-slate-800 rounded-xl border-2 border-slate-700 shadow-2xl mb-4",children:[t.jsx("h3",{className:"text-2xl font-black text-white mb-2 uppercase tracking-tighter",children:k({en:"Game Over!",vi:"K·∫øt th√∫c!"})}),t.jsx("p",{className:"text-gray-300 text-lg mb-4 font-medium",children:"draw"===j.winner?k({en:"It's a draw!",vi:"H√≤a!"}):j.winner===w?k({en:"üèÜ You Won!",vi:"üèÜ B·∫°n ƒë√£ th·∫Øng!"}):`${j.players.find(e=>e.id===j.winner)?.username} ${k({en:"wins!",vi:"th·∫Øng!"})}`}),t.jsxs("button",{onClick:()=>v.requestNewGame(),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl transition-all font-bold shadow-lg shadow-blue-600/20 active:scale-95 mx-auto",children:[t.jsx(c,{className:"w-5 h-5"})," ",k({en:"Play Again",vi:"Ch∆°i l·∫°i"})]})]}),t.jsx("div",{className:"w-full max-w-md bg-blue-700 p-3 rounded-4xl shadow-2xl mx-auto",children:t.jsx("div",{className:"grid grid-cols-7 gap-1",children:Array.from({length:u}).map((e,s)=>t.jsxs("div",{onClick:()=>(e=>{j.gamePhase===x.PLAYING&&R&&(v.isColumnFull(e)||v.requestMove(e))})(s),className:"flex flex-col gap-1 rounded-2xl transition-all duration-200 group/col relative overflow-hidden "+(R&&!v.isColumnFull(s)?"cursor-pointer hover:bg-white/5":"cursor-default"),children:[R&&!v.isColumnFull(s)&&t.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover/col:bg-white/5 rounded-2xl transition-colors pointer-events-none"}),Array.from({length:g}).map((e,n)=>((e,s)=>{const n=e*u+s,a=j.board[n],l=j.winningCells.includes(n),i=j.lastMove===n,r=j.winningCells.length>0&&!l;return t.jsx("div",{className:"w-full relative pb-[100%] h-0",children:t.jsxs("div",{className:"absolute inset-0 bg-blue-900/40 rounded-full flex items-center justify-center shadow-inner border border-blue-400/20 transition-opacity duration-500 "+(r?"opacity-40":"opacity-100"),children:[l&&t.jsx("div",{className:"absolute inset-0 rounded-full ring-4 ring-white animate-winner-pulse shadow-[0_0_20px_rgba(255,255,255,0.8)] z-10"}),"0"!==a&&t.jsx("div",{className:`\n                w-[85%] h-[85%] rounded-full shadow-lg transform transition-all duration-300\n                ${"1"===a?"bg-red-500":"bg-yellow-500"}\n                ${i?"border-4 border-white":""}\n                ${l?"animate-winner-glow":"animate-drop"}\n                ${r?"opacity-40 grayscale-[0.5]":"opacity-100"}\n              `,style:l?{}:{animationDuration:.4+.1*e+"s",animationTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)"}})]})},`${e}-${s}`)})(n,s))]},s))})}),t.jsx("button",{onClick:()=>N(!0),className:"fixed bottom-4 right-4 p-3 bg-slate-700 hover:bg-slate-600 rounded-full text-yellow-500 transition-colors z-40 shadow-lg border border-slate-500",title:C({en:"Rules",vi:"Lu·∫≠t ch∆°i"}),children:t.jsx(h,{size:24})}),y&&l.createPortal(t.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/80 p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl relative",children:[t.jsxs("div",{className:"flex justify-between sticky top-0 p-4 pr-2 bg-slate-900",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(h,{className:"w-6 h-6 text-yellow-500"}),k({en:"Game Rules: Connect 4",vi:"Lu·∫≠t Ch∆°i: N·ªëi 4"})]}),t.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(m,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"p-4 pt-0 space-y-4 text-slate-300 leading-relaxed",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:k({en:"Connect 4 is a two-player connection board game, in which the players choose a color and then take turns dropping colored discs into a seven-column, six-row vertically suspended grid.",vi:"Connect 4 (C·ªù ca-r√¥ x·∫øp ƒë·ª©ng) l√† tr√≤ ch∆°i d√†nh cho 2 ng∆∞·ªùi, l·∫ßn l∆∞·ª£t th·∫£ c√°c qu√¢n c·ªù m√†u v√†o l∆∞·ªõi x·∫øp ƒë·ª©ng 7 c·ªôt 6 h√†ng."})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:k({en:"Objective",vi:"M·ª•c ti√™u"})}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.jsx("li",{children:k({en:"Be the first to form a horizontal, vertical, or diagonal line of four of one's own discs.",vi:"L√† ng∆∞·ªùi ƒë·∫ßu ti√™n x·∫øp ƒë∆∞·ª£c 4 qu√¢n li√™n ti·∫øp theo h√†ng ngang, d·ªçc ho·∫∑c ch√©o."})})}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:k({en:"Gameplay",vi:"Lu·∫≠t ch∆°i"})}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:k({en:"Players take turns dropping one of their discs into an unfilled column.",vi:"Ng∆∞·ªùi ch∆°i l·∫ßn l∆∞·ª£t th·∫£ qu√¢n c·ªßa m√¨nh v√†o m·ªôt c·ªôt ch∆∞a ƒë·∫ßy."})}),t.jsx("li",{children:k({en:"The disc occupies the lowest available space within the column.",vi:"Qu√¢n c·ªù s·∫Ω r∆°i xu·ªëng v·ªã tr√≠ th·∫•p nh·∫•t c√≥ th·ªÉ trong c·ªôt."})})]}),t.jsx("h3",{className:"text-lg font-bold text-yellow-400 mt-4",children:k({en:"Winning",vi:"Chi·∫øn th·∫Øng"})}),t.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.jsx("li",{children:k({en:"The game ends when a player connects 4 discs or the board is full (draw).",vi:"Tr√≤ ch∆°i k·∫øt th√∫c khi c√≥ ng∆∞·ªùi x·∫øp ƒë∆∞·ª£c 4 qu√¢n ho·∫∑c b√†n c·ªù ƒë·∫ßy (h√≤a)."})})})]})})]})}),document.body)]})}export{f as default};
