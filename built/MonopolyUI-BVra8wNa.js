import{b as e,a as t,j as s}from"./index-mcTYdVPd.js";import{l as n,af as l,Z as r,ag as a,ah as i,a3 as o,o as d,D as c,a5 as x,X as h}from"./react-vendor-C7uwXrww.js";import"./socket-DRbsQkF5.js";import{B as u,C as m,a as p,c as g}from"./types-gixil7wH.js";import"./zustand-D2o_pnFT.js";const b=e=>e&&g[e]||"";function f({game:g,currentUserId:f}){const y=g,{confirm:v}=e(),[j,N]=n.useState(y.getState()),[w,C]=n.useState(y.getState().logs||[]),{ti:T,ts:k}=t(),[S,R]=n.useState(!1),[I,P]=n.useState(y.getState().diceValues||[1,1]),[B,A]=n.useState(null),[L,$]=n.useState(!0),[G,q]=n.useState(!1),[H,O]=n.useState([]),[M,E]=n.useState(null),[D,V]=n.useState(""),[Y,J]=n.useState({}),U=n.useRef(!1),K=n.useRef(y.getState().diceValues),_=n.useRef(y.getState()),z=n.useRef({});n.useEffect(()=>{const e={};y.getState().players.forEach(t=>{t.id&&(e[t.id]=t.position)}),z.current=e,_.current=y.getState(),y.onUpdate(e=>{_.current=e;const t=e.diceValues;if(t&&(!K.current||t[0]!==K.current[0]||t[1]!==K.current[1])&&!U.current){U.current=!0,K.current=t,R(!0);let e=0;const s=setInterval(()=>{if(P([Math.floor(6*Math.random())+1,Math.floor(6*Math.random())+1]),e++,e>8){clearInterval(s);const e=_.current;P(e.diceValues||t),R(!1),U.current=!1,N(e);const n={};e.players.forEach(e=>{e.id&&(n[e.id]=e.position)}),z.current=n}},80);return}if(!U.current){N(e),e.diceValues&&P(e.diceValues),K.current=e.diceValues||void 0;const t={};e.players.forEach(e=>{e.id&&(t[e.id]=e.position)}),z.current=t}C(t=>{const s=e.logs||[],n=new Set(t.map(e=>e.id)),l=s.filter(e=>!n.has(e.id));return 0===l.length?t:[...t,...l]})}),N(y.getState()),y.requestSync()},[y]);const W=y.getMyPlayerIndex(),F=j.players[j.currentPlayerIndex],X=F?.id===f,Q=y.isHostUser,Z=X&&(!j.hasRolled||j.canRollAgain)&&!j.pendingAction&&!S,ee=e=>e>=0&&e<=10?{row:10,col:10-e,rotation:0}:e>=11&&e<=19?{row:10-(e-10),col:0,rotation:90}:e>=20&&e<=30?{row:0,col:e-20,rotation:180}:{row:e-30,col:10,rotation:270},te=(e,t="w-12 h-12")=>{const n={"top-left":"top-1 left-1","top-right":"top-1 right-1","middle-left":"top-1/2 left-1 -translate-y-1/2","middle-right":"top-1/2 right-1 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bottom-left":"bottom-1 left-1","bottom-right":"bottom-1 right-1"};return s.jsx("div",{className:`relative ${t} bg-white rounded-lg shadow-lg border-2 border-gray-300`,style:{animation:S?"bounce-dice 0.3s ease-in-out infinite":void 0},children:({1:["center"],2:["top-right","bottom-left"],3:["top-right","center","bottom-left"],4:["top-left","top-right","bottom-left","bottom-right"],5:["top-left","top-right","center","bottom-left","bottom-right"],6:["top-left","top-right","middle-left","middle-right","bottom-left","bottom-right"]}[e]||[]).map((e,t)=>s.jsx("div",{className:`absolute w-2 h-2 bg-gray-800 rounded-full ${n[e]}`},t))})},se=e=>0===e.length?s.jsx("p",{className:"text-gray-400 text-xs italic pl-1",children:T({en:"No properties",vi:"Ch∆∞a c√≥ t√†i s·∫£n"})}):s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.map(e=>{const t=u[e.spaceId];return t?s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-medium text-white bg-slate-800/80 px-2 py-1 rounded-md cursor-pointer hover:bg-slate-700 transition-colors border border-slate-600/50 shadow-sm",onClick:e=>{e.stopPropagation(),A(t)},children:[s.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm",style:{backgroundColor:"property"===t.type&&t.color?b(t.color):"#666"}}),s.jsx("span",{className:"truncate max-w-[80px]",children:T(t.name)}),e.houses>0&&s.jsx("span",{className:"text-yellow-400 text-[9px] ml-0.5",children:5===e.houses?"üè®":`üè†${e.houses}`}),e.mortgaged&&s.jsx(r,{className:"w-2.5 h-2.5 text-red-400 ml-0.5"})]},e.spaceId):null})}),ne=()=>s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-bold text-orange-400 mb-4 border-b border-orange-400/30 pb-2",children:[T({en:"Chance Cards",vi:"Th·∫ª C∆° H·ªôi"})," (?)"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:m.map(e=>s.jsxs("div",{className:"bg-slate-700 border-l-2 border-orange-500 p-2 rounded text-xs flex flex-col justify-between h-full",children:[s.jsx("p",{className:"text-white font-medium",children:T(e.text)}),s.jsx("p",{className:"text-[10px] text-gray-400 uppercase",children:e.action.type.replace(/_/g," ")})]},e.id))})]}),le=()=>s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-yellow-400 mb-4 border-b border-yellow-400/30 pb-2",children:[T({en:"Community Chest Cards",vi:"Th·∫ª Kh√≠ V·∫≠n"})," (chest)"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:p.map(e=>s.jsxs("div",{className:"bg-slate-700 border-l-2 border-yellow-500 p-2 rounded text-xs flex flex-col justify-between h-full",children:[s.jsx("p",{className:"text-white font-medium",children:T(e.text)}),s.jsx("p",{className:"text-[10px] text-gray-400 uppercase",children:e.action.type.replace(/_/g," ")})]},e.id))})]});return s.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 p-0 w-full max-w-6xl mx-auto",children:[(()=>{const e=j.tradeOffers?.filter(e=>!H.includes(e.id)&&(e.toPlayerId===f||e.fromPlayerId===f&&("pending"===e.status||"declined"===e.status)));return e&&0!==e.length?s.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-2 w-full max-w-sm px-4",children:e.map(e=>{const t=e.fromPlayerId===f,n=j.players.find(s=>s.id===(t?e.toPlayerId:e.fromPlayerId)),l=u[e.propertyId],r=j.properties.find(t=>t.spaceId===e.propertyId),a=r?.ownerId===e.fromPlayerId;let i=T({en:"TRADE OFFER",vi:"L·ªúI M·ªúI GIAO D·ªäCH"}),o="",d="text-yellow-400";return"declined"===e.status?(i=T({en:"TRADE DECLINED",vi:"GIAO D·ªäCH B·ªä T·ª™ CH·ªêI"}),d="text-red-400",o=`${n?.username} ${T({en:"declined your offer.",vi:"ƒë√£ t·ª´ ch·ªëi ƒë·ªÅ ngh·ªã c·ªßa b·∫°n."})}`):o=t?a?`${T({en:"You offered to sell",vi:"B·∫°n ƒë·ªÅ ngh·ªã b√°n"})} ${T(l?.name)} ${T({en:"to",vi:"cho"})} ${n?.username}`:`${T({en:"You offered to buy",vi:"B·∫°n ƒë·ªÅ ngh·ªã mua"})} ${T(l?.name)} ${T({en:"from",vi:"t·ª´"})} ${n?.username}`:a?`${n?.username} ${T({en:"offers to sell",vi:"mu·ªën b√°n"})} ${T(l?.name)} ${T({en:"to you",vi:"cho b·∫°n"})}`:`${n?.username} ${T({en:"offers to buy",vi:"mu·ªën mua"})} ${T(l?.name)} ${T({en:"from you",vi:"t·ª´ b·∫°n"})}`,s.jsxs("div",{className:"border-2 rounded-lg p-3 shadow-xl animate-in slide-in-from-top duration-300 "+("declined"===e.status?"bg-slate-800 border-red-500":"bg-slate-800 border-yellow-500"),children:[s.jsx("h4",{className:`font-bold text-sm text-center mb-1 ${d}`,children:i}),s.jsx("p",{className:"text-white text-xs text-center mb-2",children:o}),"declined"===e.status&&e.responseMessage&&s.jsx("div",{className:"bg-red-900/50 p-2 rounded mb-2 border border-red-700/50",children:s.jsxs("p",{className:"text-red-200 text-xs text-center italic",children:['"',T(e.responseMessage),'"']})}),"declined"!==e.status&&s.jsxs("p",{className:"text-center text-green-400 font-mono font-bold mb-3",children:[e.price.toLocaleString(),"ƒë"]}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[M!==e.id&&"pending"===e.status&&!t&&s.jsx("button",{onClick:()=>y.requestRespondTrade(e.id,!0),className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white rounded-lg text-xs font-bold shadow-md hover:scale-105 transition-transform",children:T({en:"ACCEPT",vi:"ƒê·ªíNG √ù"})}),"declined"===e.status?s.jsx("button",{onClick:()=>O(t=>[...t,e.id]),className:"px-3 py-1 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-xs font-medium",children:T({en:"Dismiss",vi:"ƒê√≥ng"})}):M===e.id?s.jsxs("div",{className:"flex flex-col gap-2 w-full animate-in slide-in-from-bottom-2 fade-in",children:[s.jsx("input",{autoFocus:!0,type:"text",value:D,onChange:e=>V(e.target.value),placeholder:T({en:"Reason (optional)...",vi:"L√Ω do (t√πy ch·ªçn)..."}),className:"bg-slate-900 border border-slate-600 rounded p-1 text-xs text-white outline-none w-full",onKeyDown:t=>{"Enter"===t.key&&(y.requestRespondTrade(e.id,!1,D),E(null),V(""))}}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{E(null),V("")},className:"px-2 py-1 bg-slate-600 text-xs text-white rounded",children:T({en:"Back",vi:"Tr·ªü l·∫°i"})}),s.jsx("button",{onClick:()=>{y.requestRespondTrade(e.id,!1,D),E(null),V("")},className:"px-2 py-1 bg-red-600 text-xs text-white rounded font-bold",children:T({en:"Send",vi:"G·ª≠i"})})]})]}):s.jsx("button",{onClick:()=>{t?y.requestCancelTrade(e.id):(E(e.id),V(""))},className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded-lg text-xs font-medium shadow-sm hover:opacity-90 transition-opacity",children:T(t?{en:"Cancel",vi:"H·ªßy"}:{en:"DECLINE",vi:"T·ª™ CH·ªêI"})})]})]},e.id)})}):null})(),s.jsx("style",{dangerouslySetInnerHTML:{__html:"\n@keyframes bounce-dice {\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  25% { transform: translateY(-15px) rotate(90deg); }\n  50% { transform: translateY(-8px) rotate(180deg); }\n  75% { transform: translateY(-12px) rotate(270deg); }\n}\n\n@keyframes pulse-token {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 currentColor; }\n  50% { transform: scale(1.3); box-shadow: 0 0 12px 4px currentColor; }\n}\n\n@keyframes glow {\n  0%, 100% { box-shadow: 0 0 5px 2px currentColor; }\n  50% { box-shadow: 0 0 15px 5px currentColor; }\n}\n\n@keyframes slide-in {\n  from { transform: translateY(-20px); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n}\n\n@keyframes token-move {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.5) translateY(-5px); }\n  100% { transform: scale(1); }\n}\n"}}),s.jsx("div",{className:"flex flex-col items-center gap-2 flex-1",children:s.jsxs("div",{className:"relative bg-slate-900 rounded-lg sm:rounded-xl p-0.5 sm:p-1 shadow-2xl border-2 sm:border-4 border-slate-700 overflow-hidden w-full max-w-[95vw]",children:[s.jsxs("div",{className:"grid gap-[1px] sm:gap-0.5 w-full",style:{gridTemplateColumns:"repeat(11, 1fr)",gridTemplateRows:"repeat(11, 1fr)"},children:[u.map(e=>{const t=ee(e.id),n=j.properties.find(t=>t.spaceId===e.id),l=n?j.players.find(e=>e.id===n.ownerId):null;return s.jsxs("div",{className:"bg-slate-700 border border-slate-600 relative flex flex-col overflow-hidden cursor-pointer hover:bg-slate-600 transition-colors",style:{gridRow:t.row+1,gridColumn:t.col+1,aspectRatio:1},onClick:()=>A(e),children:["property"===e.type&&e.color&&s.jsx("div",{className:"w-full h-[15%] min-h-[2px] flex-shrink-0",style:{backgroundColor:b(e.color)}}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-0.5 overflow-hidden",children:s.jsx("span",{className:"text-[5px] sm:text-[6px] md:text-[8px] text-white text-center leading-tight line-clamp-2 font-medium",children:T(e.name||e.name)})}),n&&n.houses>0&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center gap-[1px] sm:gap-0.5 p-[1px] sm:p-0.5",children:5===n.houses?s.jsx("div",{className:"w-2 h-1.5 sm:w-3 sm:h-2 bg-red-500 rounded-sm",title:"Hotel"}):Array.from({length:n.houses}).map((e,t)=>s.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 bg-green-500 rounded-sm",title:"House"},t))}),l&&s.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full border border-white",style:{backgroundColor:l.color},title:l.username}),n?.mortgaged&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(r,{className:"w-2 h-2 sm:w-3 sm:h-3 text-white"})})]},e.id)}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 flex flex-col items-center justify-center overflow-auto",style:{gridRow:"2 / 11",gridColumn:"2 / 11"},children:[s.jsx("h2",{className:"text-xs sm:text-lg md:text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-red-500 mb-1 sm:mb-2",children:"C·ªú T·ª∂ PH√ö"}),(()=>{if("waiting"===j.gamePhase)return s.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 bg-slate-800 rounded-lg",children:[s.jsx("h3",{className:"text-white font-bold",children:T({en:"Waiting for players...",vi:"ƒêang ch·ªù ng∆∞·ªùi ch∆°i..."})}),s.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-sm",children:j.players.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),s.jsxs("span",{className:"text-white text-sm",children:[e.id?e.username:T({en:"(empty)",vi:"(tr·ªëng)"}),e.isBot&&" ü§ñ"]})]}),Q&&(e.isBot?s.jsx("button",{onClick:()=>y.requestRemoveBot(t),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded",children:"‚úï"}):!e.id&&s.jsx("button",{onClick:()=>y.requestAddBot(t),className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded",children:"+Bot"}))]},t))}),Q&&y.canStartGame()&&s.jsxs("button",{onClick:()=>y.requestStartGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[s.jsx(o,{className:"w-4 h-4"})," ",T({en:"Start Game",vi:"B·∫Øt ƒë·∫ßu"})]})]});if("ended"===j.gamePhase){const e=j.players.find(e=>e.id===j.winner);return s.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 bg-slate-800 rounded-lg",children:[s.jsxs("h3",{className:"text-2xl font-bold text-yellow-400",children:["üéâ ",T({en:"Game Over!",vi:"K·∫øt th√∫c!"})]}),s.jsx("p",{className:"text-white",children:e?.id===f?T({en:"You won!",vi:"B·∫°n th·∫Øng!"}):`${e?.username} ${T({en:"wins!",vi:"th·∫Øng!"})}`}),Q&&s.jsxs("button",{onClick:()=>y.requestResetGame(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg",children:[s.jsx(d,{className:"w-4 h-4"})," ",T({en:"Play Again",vi:"Ch∆°i l·∫°i"})]})]})}return s.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-slate-800 rounded-lg w-full max-w-md",children:[s.jsx("div",{className:"text-white text-center",children:X?s.jsx("span",{className:"text-green-400 font-bold text-lg",children:T({en:"Your turn!",vi:"L∆∞·ª£t c·ªßa b·∫°n!"})}):s.jsxs("span",{className:"text-gray-300",children:[T({en:"Waiting for",vi:"ƒêang ch·ªù"})," ",s.jsx("span",{style:{color:F?.color},children:F?.username}),"..."]})}),(j.diceValues||S)&&s.jsxs("div",{className:"flex items-center gap-3",children:[te(I[0]),te(I[1]),s.jsxs("span",{className:"text-white text-xl font-bold ml-2",children:["= ",I[0]+I[1]]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[Z&&s.jsxs("button",{onClick:()=>y.requestRollDice(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors font-semibold",children:[s.jsx(c,{className:"w-5 h-5"}),j.canRollAgain?T({en:"Roll Again! üéâ",vi:"ƒê·ªï ti·∫øp! üéâ"}):T({en:"Roll Dice",vi:"ƒê·ªï x√≠ ng·∫ßu"})]}),X&&F?.inJail&&!j.hasRolled&&s.jsx("button",{onClick:()=>y.requestPayJailFine(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:T({en:"Pay 500ƒë to Leave Jail",vi:"Tr·∫£ 500ƒë ƒë·ªÉ ra t√π"})}),X&&j.hasRolled&&!j.canRollAgain&&!j.pendingAction&&!S&&s.jsx("button",{onClick:()=>y.requestEndTurn(),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:T({en:"End Turn",vi:"K·∫øt th√∫c l∆∞·ª£t"})})]}),j.pendingAction&&X&&s.jsxs("div",{className:"w-full p-3 bg-slate-700 rounded-lg animate-slide-in",children:["BUY_DECISION"===j.pendingAction.type&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("p",{className:"text-white text-center",children:[T({en:"Buy",vi:"Mua"})," ",T(u[j.pendingAction.spaceId]?.name)," ",T({en:"for",vi:"gi√°"})," ",(()=>{const e=u[j.pendingAction.spaceId];return e&&("property"===e.type||"railroad"===e.type||"utility"===e.type)&&e.price?e.price.toLocaleString():""})(),"ƒë?"]}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx("button",{onClick:()=>{"BUY_DECISION"===j.pendingAction?.type&&y.requestBuyProperty(j.pendingAction.spaceId)},className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg",children:T({en:"Buy",vi:"Mua"})}),s.jsx("button",{onClick:()=>y.requestDeclineProperty(),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg",children:T({en:"Decline",vi:"B·ªè qua"})})]})]}),"PAY_RENT"===j.pendingAction.type&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("p",{className:"text-white text-center",children:[T({en:"Pay",vi:"Tr·∫£"})," ",j.pendingAction.amount.toLocaleString(),"ƒë"," ",T({en:"rent",vi:"ti·ªÅn thu√™"})]}),s.jsx("button",{onClick:()=>y.requestPayRent(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg mx-auto",children:T({en:"Pay Rent",vi:"Tr·∫£ ti·ªÅn thu√™"})})]}),"PAY_TAX"===j.pendingAction.type&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("p",{className:"text-white text-center",children:[T({en:"Pay",vi:"Tr·∫£"})," ",j.pendingAction.amount.toLocaleString(),"ƒë"," ",T({en:"tax",vi:"thu·∫ø"})]}),s.jsx("button",{onClick:()=>y.requestPayTax(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg mx-auto",children:T({en:"Pay Tax",vi:"Tr·∫£ thu·∫ø"})})]}),"CARD"===j.pendingAction.type&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-white text-center font-medium",children:T(j.pendingAction.card.text)}),s.jsx("button",{onClick:()=>y.requestUseCard(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg mx-auto",children:"OK"})]})]}),j.lastAction&&s.jsx("p",{className:"text-gray-400 text-sm text-center",children:T(j.lastAction)}),Q&&s.jsxs("button",{onClick:async()=>{await v(k({en:"Start a new game? Current progress will be lost.",vi:"B·∫Øt ƒë·∫ßu v√°n m·ªõi? Ti·∫øn tr√¨nh hi·ªán t·∫°i s·∫Ω b·ªã m·∫•t."}),k({en:"New Game",vi:"V√°n m·ªõi"}))&&y.requestResetGame()},className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-colors flex items-center gap-2",title:T({en:"New Game",vi:"V√°n m·ªõi"}),children:[s.jsx(x,{className:"w-4 h-4"})," "]})]})})()]})]}),s.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:j.players.map((e,t)=>{if(!e.id||e.isBankrupt)return null;const n=e.id===F?.id;let l=e.position;S&&n&&void 0!==z.current[e.id]&&(l=z.current[e.id]);const r=ee(l);let a=r.row/11*100+4.54,i=r.col/11*100+4.54;const o=3*(t%2-.5),d=3*(Math.floor(t/2)-.5);return s.jsxs("div",{className:"absolute w-3 h-3 sm:w-5 sm:h-5 rounded-full border-2 border-white shadow-lg flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 transition-all duration-700 cubic-bezier(0.34, 1.56, 0.64, 1) "+(n?"z-50 ring-4 ring-yellow-400 ring-offset-2 ring-offset-slate-700 scale-150 shadow-[0_0_20px_rgba(250,204,21,0.8)]":"z-30"),style:{top:`${a+d}%`,left:`${i+o}%`,backgroundColor:e.color},title:e.username,children:[s.jsx("span",{className:"text-[6px] sm:text-[9px] font-bold text-white drop-shadow-md select-none",children:e.username.charAt(0).toUpperCase()}),n&&s.jsx("div",{className:"absolute inset-0 rounded-full animate-ping opacity-75 bg-white"})]},e.id)})})]})}),s.jsxs("div",{className:"flex flex-col gap-4 flex-shrink-0 lg:w-64 w-full",children:[s.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 w-full",children:[s.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:T({en:"Players",vi:"Ng∆∞·ªùi ch∆°i"})}),s.jsx("div",{className:"space-y-2",children:j.players.map((e,t)=>{if(!e.id)return null;const n=j.currentPlayerIndex===t,l=j.properties.filter(t=>t.ownerId===e.id),r=Y[e.id||""];return s.jsxs("div",{className:`p-2 rounded-lg transition-colors cursor-pointer ${n?"bg-slate-600 ring-2 ring-yellow-400":"bg-slate-700 hover:bg-slate-600"}\n                ${e.isBankrupt?"opacity-50":""}`,onClick:()=>J(t=>({...t,[e.id||""]:!r})),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:e.color}}),s.jsxs("span",{className:"text-white text-sm font-medium flex-1 truncate text-left",children:[e.username,e.isBot&&" ü§ñ",e.id===f&&T({en:" (You)",vi:" (B·∫°n)"})]}),e.inJail&&s.jsxs("span",{className:"text-xs",children:["üîí ",T({en:"in jail",vi:"trong t√π"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[s.jsx(a,{className:"w-3 h-3"}),s.jsx("span",{className:"font-mono",children:e.money.toLocaleString()}),s.jsx(i,{className:"w-3 h-3 ml-2"}),s.jsx("span",{children:l.length})]}),r&&s.jsx("div",{className:"mt-2 pt-2 border-t border-slate-500",children:se(l)})]},t)})})]}),"playing"===j.gamePhase&&W>=0&&f&&s.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[s.jsx("h3",{className:"text-white font-bold mb-2 text-sm",children:T({en:"My Properties",vi:"T√†i s·∫£n c·ªßa t√¥i"})}),se(y.getPlayerProperties(f))]}),s.jsxs("div",{className:"bg-slate-800 rounded-lg p-2 w-full flex flex-col transition-all duration-300 "+(L?"h-40 lg:h-56":"h-auto"),children:[s.jsxs("h3",{onClick:()=>$(!L),className:"text-white font-bold text-xs sticky top-0 bg-slate-800 z-10 flex items-center justify-between cursor-pointer hover:text-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:L?"‚ñº":"‚ñ∂"}),s.jsx("span",{children:T({en:"History",vi:"L·ªãch s·ª≠"})})]}),s.jsx("span",{className:"text-[10px] font-normal text-gray-400",children:w?.length||0})]}),L&&s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-0.5 pr-1 font-mono custom-scrollbar mt-1",children:[(w||[]).slice().reverse().map(e=>s.jsxs("div",{className:"px-1.5 py-0.5 rounded-sm border-l-2 text-[10px] leading-tight flex items-baseline "+("alert"===e.type?"bg-red-900/20 border-red-500 text-red-200":"action"===e.type?"bg-blue-900/20 border-blue-500 text-blue-200":"bg-slate-700/30 border-gray-500 text-gray-400"),children:[s.jsx("span",{className:"opacity-40 mr-1.5 min-w-[38px] flex-shrink-0",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),s.jsx("span",{className:"break-words text-left",children:T(e.message)})]},e.id)),(!w||0===w.length)&&s.jsx("p",{className:"text-gray-600 text-[10px] text-center italic mt-2",children:T({en:"No history yet",vi:"Ch∆∞a c√≥ l·ªãch s·ª≠"})})]})]})]}),G?s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 p-4",onClick:()=>q(!1),children:s.jsxs("div",{className:"bg-slate-800 rounded-xl max-w-4xl w-full max-h-[90%] flex flex-col shadow-2xl border border-slate-600",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(l,{className:"w-6 h-6 text-yellow-500"}),T({en:"Game Rules & Cards",vi:"Lu·∫≠t Ch∆°i & Th·∫ª"})]}),s.jsx("button",{onClick:()=>q(!1),className:"p-1 hover:bg-slate-700 rounded transition-colors text-white",children:s.jsx(h,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4 border-b border-green-400/30 pb-2",children:T({en:"Basic Rules",vi:"Lu·∫≠t C∆° B·∫£n"})}),s.jsxs("ul",{className:"list-disc pl-5 text-gray-300 space-y-2 text-sm",children:[s.jsxs("li",{children:[s.jsxs("strong",{className:"text-white",children:[T({en:"Goal",vi:"M·ª•c Ti√™u"}),":"]})," ",T({en:"Be the last player remaining with money. Bankrupt other players by buying properties and charging rent.",vi:"L√† ng∆∞·ªùi ch∆°i cu·ªëi c√πng c√≤n ti·ªÅn. L√†m ph√° s·∫£n ng∆∞·ªùi kh√°c b·∫±ng c√°ch mua ƒë·∫•t v√† thu ti·ªÅn thu√™."})]}),s.jsxs("li",{children:[s.jsxs("strong",{className:"text-white",children:[T({en:"Movement",vi:"Di Chuy·ªÉn"}),":"]})," ",T({en:"Roll two dice to move. Rolling doubles allows you to roll again. Three consecutive doubles sends you to Jail.",vi:"Gieo 2 x√≠ ng·∫ßu ƒë·ªÉ di chuy·ªÉn. ƒê·ªï ƒë√¥i ƒë∆∞·ª£c ƒëi ti·∫øp. ƒê·ªï ƒë√¥i 3 l·∫ßn li√™n ti·∫øp s·∫Ω ph·∫£i v√†o T√π."})]}),s.jsxs("li",{children:[s.jsxs("strong",{className:"text-white",children:[T({en:"Properties",vi:"T√†i S·∫£n"}),":"]})," ",T({en:"Streets, Railroads, and Utilities. Buy them to collect rent. Complete a color set to double the rent and build Houses/Hotels.",vi:"ƒê∆∞·ªùng ph·ªë, Nh√† ga, C√¥ng ty. Mua ƒë·ªÉ thu ti·ªÅn thu√™. S∆∞u t·∫≠p ƒë·ªß b·ªô m√†u ƒë·ªÉ nh√¢n ƒë√¥i ti·ªÅn thu√™ v√† x√¢y Nh√†/Kh√°ch s·∫°n."})]}),s.jsxs("li",{children:[s.jsxs("strong",{className:"text-white",children:[T({en:"Jail",vi:"Nh√† T√π"}),":"]})," ",T({en:"If sent to Jail, you cannot move but can still collect rent. To leave: pay 500ƒë, roll doubles, or use a 'Get Out of Jail Free' card.",vi:"N·∫øu v√†o T√π, b·∫°n kh√¥ng th·ªÉ di chuy·ªÉn nh∆∞ng v·∫´n ƒë∆∞·ª£c thu ti·ªÅn. ƒê·ªÉ ra: tr·∫£ 500ƒë, ƒë·ªï ƒë√¥i, ho·∫∑c d√πng th·∫ª 'Ra T√π Mi·ªÖn Ph√≠'."})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4 border-b border-blue-400/30 pb-2",children:T({en:"Special Spaces",vi:"√î ƒê·∫∑c Bi·ªát"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-white mb-1",children:T({en:"Utilities (Water / Electricity)",vi:"C√¥ng Ty (ƒêi·ªán/N∆∞·ªõc)"})}),s.jsxs("p",{className:"text-xs text-gray-300",children:[T({en:"Rent depends on the dice roll.",vi:"Ti·ªÅn thu√™ ph·ª• thu·ªôc v√†o s·ªë ƒë·ªï x√≠ ng·∫ßu."}),s.jsx("br",{}),"-"," ",T({en:"Own 1 Utility: Rent = 4x dice roll",vi:"S·ªü h·ªØu 1 C√¥ng ty: Thu√™ = 4x s·ªë ƒë·ªï x√≠ ng·∫ßu"}),s.jsx("br",{}),"-"," ",T({en:"Own 2 Utilities: Rent = 10x dice roll",vi:"S·ªü h·ªØu 2 C√¥ng ty: Thu√™ = 10x s·ªë ƒë·ªï x√≠ ng·∫ßu"})]})]}),s.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-white mb-1",children:T({en:"Railroads",vi:"Nh√† Ga"})}),s.jsxs("p",{className:"text-xs text-gray-300",children:[T({en:"Rent depends on the railroad count.",vi:"Ti·ªÅn thu√™ ph·ª• thu·ªôc v√†o s·ªë ga s·ªü h·ªØu."}),s.jsx("br",{}),T({en:"The more you own, the higher the rent.",vi:"S·ªü h·ªØu c√†ng nhi·ªÅu, gi√° thu√™ c√†ng cao."}),s.jsx("br",{}),"-"," ",T({en:"Own 1 Railroad: Rent = Original Rent",vi:"S·ªü h·ªØu 1 Ga: Thu√™ = Gi√° thu√™ ban ƒë·∫ßu"}),s.jsx("br",{}),"-"," ",T({en:"Own 2 Railroads: Rent = 2x Original Rent",vi:"S·ªü h·ªØu 2 Ga: Thu√™ = 2x Gi√° thu√™ ban ƒë·∫ßu"}),s.jsx("br",{}),"-"," ",T({en:"Own 3 Railroads: Rent = 3x Original Rent",vi:"S·ªü h·ªØu 3 Ga: Thu√™ = 3x Gi√° thu√™ ban ƒë·∫ßu"}),s.jsx("br",{}),"-"," ",T({en:"Own 4 Railroads: Rent = 4x Original Rent",vi:"S·ªü h·ªØu 4 Ga: Thu√™ = 4x Gi√° thu√™ ban ƒë·∫ßu"})]})]}),s.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-white mb-1",children:T({en:"Taxes",vi:"Thu·∫ø"})}),s.jsxs("p",{className:"text-xs text-gray-300",children:[T({en:"Pay a fixed amount to the bank.",vi:"Tr·∫£ m·ªôt kho·∫£n c·ªë ƒë·ªãnh cho ng√¢n h√†ng."}),s.jsx("br",{}),"-"," ",s.jsx("span",{className:"text-red-400",children:T({en:"Income Tax",vi:"Thu·∫ø Thu Nh·∫≠p"})}),": 2000ƒë",s.jsx("br",{}),"-"," ",s.jsx("span",{className:"text-red-400",children:T({en:"Luxury Tax",vi:"Thu·∫ø Xa X·ªâ"})}),": 1000ƒë"]})]}),s.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-white mb-1",children:T({en:"Jail",vi:"Nh√† T√π"})}),s.jsxs("p",{className:"text-xs text-gray-300",children:["-"," ",s.jsx("strong",{className:"text-orange-400",children:T({en:"Go to Jail",vi:"V√†o T√π"})}),":"," ",T({en:"Move directly to Jail. Do not pass GO, do not collect salary. Turn ends.",vi:"ƒêi th·∫≥ng v√†o t√π. Kh√¥ng qua Kh·ªüi H√†nh, kh√¥ng nh·∫≠n l∆∞∆°ng. K·∫øt th√∫c l∆∞·ª£t."}),s.jsx("br",{}),"-"," ",s.jsx("strong",{className:"text-green-400",children:T({en:"Just Visiting",vi:"ThƒÉm T√π"})}),":"," ",T({en:"If you land here normally, nothing happens.",vi:"N·∫øu b·∫°n ƒëi v√†o √¥ n√†y b√¨nh th∆∞·ªùng, kh√¥ng c√≥ g√¨ x·∫£y ra."}),s.jsx("br",{}),"-"," ",s.jsx("strong",{className:"text-red-400",children:T({en:"In Jail",vi:"Trong T√π"})}),":"," ",T({en:"You can still collect rent! To leave: roll doubles, pay 500ƒë, or use card.",vi:"V·∫´n ƒë∆∞·ª£c thu ti·ªÅn thu√™! ƒê·ªÉ ra: ƒë·ªï ƒë√¥i, tr·∫£ 500ƒë, ho·∫∑c d√πng th·∫ª."})]})]})]})]}),ne(),le()]})]})}):null,(()=>{if(!B)return null;const e=j.properties.find(e=>e.spaceId===B.id),t=e?j.players.find(t=>t.id===e.ownerId):null,n=e?.ownerId===f;return s.jsx("div",{className:"fixed inset-0 z-50 flex md:items-center items-start justify-center justify-start bg-black/60 p-4",onClick:()=>A(null),children:s.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 max-w-sm w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:["property"===B.type&&B.color&&s.jsx("div",{className:"h-8 rounded-t-lg -mx-4 -mt-4 mb-3",style:{backgroundColor:b(B.color)}}),s.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:T(B.name)}),B.description&&s.jsx("ul",{className:"text-gray-300 text-sm",children:k(B.description).split("\n").map(e=>s.jsx("li",{children:e},e))}),"chest"===B.type&&le(),"chance"===B.type&&ne(),s.jsxs("div",{className:"text-gray-300 space-y-1 text-sm",children:[("property"===B.type||"railroad"===B.type||"utility"===B.type)&&B.price&&s.jsxs("p",{children:["üí∞ ",T({en:"Price",vi:"Gi√° mua"}),":"," ",B.price.toLocaleString(),"ƒë"]}),"property"===B.type&&B.houseCost&&s.jsxs("p",{children:["üî® ",T({en:"Build house",vi:"Gi√° x√¢y nh√†"}),":"," ",B.houseCost.toLocaleString(),"ƒë"]}),"tax"===B.type&&B.taxAmount&&s.jsxs("p",{children:["üí∞ ",T({en:"Tax",vi:"Thu·∫ø"}),":"," ",B.taxAmount.toLocaleString(),"ƒë"]}),("railroad"===B.type||"utility"===B.type)&&B.baseRent&&s.jsxs("p",{className:"mt-3 pt-3",children:["üíµ ",T({en:"Rent",vi:"Thu√™"}),":"," ",B.baseRent.toLocaleString(),"utility"===B.type?"x üé≤":"ƒë","railroad"===B.type?" x"+j.properties.filter(e=>j.properties.find(e=>e.spaceId===B.id)?.ownerId===e.ownerId&&"railroad"===u[e.spaceId].type).length+k({en:" (multiplied by railroad count)",vi:" (nh√¢n s·ªë ga s·ªü h·ªØu)"}):""]}),"property"===B.type&&B.rent&&s.jsxs("div",{className:"mt-2 text-xs flex flex-col gap-1",children:[s.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(e&&0!==e.houses?"":"bg-green-900/40 text-green-300 font-bold border border-green-700/50"),children:[s.jsx("span",{children:T({en:"Rent",vi:"Thu√™"})}),s.jsxs("span",{children:[B.rent[0].toLocaleString(),"ƒë"]})]}),s.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(1===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[s.jsx("span",{children:T({en:"With 1 House",vi:"V·ªõi 1 Nh√†"})}),s.jsxs("span",{children:[B.rent[1].toLocaleString(),"ƒë"]})]}),s.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(2===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[s.jsx("span",{children:T({en:"With 2 Houses",vi:"V·ªõi 2 Nh√†"})}),s.jsxs("span",{children:[B.rent[2].toLocaleString(),"ƒë"]})]}),s.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(3===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[s.jsx("span",{children:T({en:"With 3 Houses",vi:"V·ªõi 3 Nh√†"})}),s.jsxs("span",{children:[B.rent[3].toLocaleString(),"ƒë"]})]}),s.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(4===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[s.jsx("span",{children:T({en:"With 4 Houses",vi:"V·ªõi 4 Nh√†"})}),s.jsxs("span",{children:[B.rent[4].toLocaleString(),"ƒë"]})]}),s.jsxs("div",{className:"flex justify-between px-2 py-1 rounded "+(5===e?.houses?"bg-green-900/40 text-green-300 font-bold border border-green-700/50":""),children:[s.jsx("span",{children:T({en:"With Hotel",vi:"V·ªõi Kh√°ch s·∫°n"})}),s.jsxs("span",{children:[B.rent[5]?.toLocaleString(),"ƒë"]})]})]})]}),t&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.color}}),s.jsxs("span",{className:"text-white",children:[T({en:"Owned by",vi:"S·ªü h·ªØu b·ªüi"}),": ",t.username]})]}),e&&e.houses>0&&s.jsxs("p",{className:"text-gray-300 text-sm mt-1",children:["üè†"," ",5===e.houses?T({en:"Hotel",vi:"Kh√°ch s·∫°n"}):`${e.houses} ${T({en:"house(s)",vi:"nh√†"})}`]})]}),n&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-600 flex flex-col gap-2",children:[s.jsx("h4",{className:"text-white text-xs font-bold uppercase mb-1",children:T({en:"Manage Property",vi:"Qu·∫£n l√Ω t√†i s·∫£n"})}),e&&e.houses>0&&"property"===B.type&&B.houseCost&&s.jsxs("button",{onClick:()=>y.requestSellHouse(B.id),className:"w-full px-3 py-1.5 bg-orange-700 hover:bg-orange-600 text-white rounded text-xs",children:[T({en:"Sell House",vi:"B√°n nh√†"})," (+",B.houseCost?(B.houseCost/2).toLocaleString():0,"ƒë)"]}),e&&!e.mortgaged&&0===e.houses&&("property"===B.type||"railroad"===B.type||"utility"===B.type)&&B.price&&s.jsxs("button",{onClick:async()=>{const e=((B.price||0)/2).toLocaleString();await v(k({en:`Mortgage ${k(B.name)} for ${e}?`,vi:`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën th·∫ø ch·∫•p ${k(B.name)} v·ªõi gi√° ${e}?`}),k({en:"Mortgage",vi:"Th·∫ø ch·∫•p"}))&&y.requestMortgage(B.id)},className:"w-full px-3 py-1.5 bg-red-700 hover:bg-red-600 text-white rounded text-xs",children:[T({en:"Mortgage",vi:"Th·∫ø ch·∫•p"})," (+",(B.price/2).toLocaleString(),"ƒë)"]}),e&&e.mortgaged&&("property"===B.type||"railroad"===B.type||"utility"===B.type)&&B.price&&s.jsxs("button",{onClick:()=>y.requestUnmortgage(B.id),className:"w-full px-3 py-1.5 bg-blue-700 hover:bg-blue-600 text-white rounded text-xs",children:[T({en:"Unmortgage",vi:"Chu·ªôc l·∫°i"})," (-",(B.price/2*1.1).toLocaleString(),"ƒë)"]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-1",children:T({en:"Sell to Player",vi:"B√°n cho ng∆∞·ªùi kh√°c"})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("select",{className:"flex-1 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"trade-player-select",children:j.players.filter(e=>e.id&&e.id!==f).map(e=>s.jsx("option",{value:e.id,children:e.username},e.id))}),s.jsx("input",{type:"number",placeholder:k({en:"Price",vi:"Gi√°"}),className:"w-16 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"trade-price-input"}),s.jsx("button",{onClick:()=>{const e=document.getElementById("trade-player-select"),t=document.getElementById("trade-price-input"),s=e.value,n=parseInt(t.value);s&&!isNaN(n)&&n>0&&(y.requestOfferTrade(s,B.id,n),A(null))},className:"px-2 py-1 bg-green-700 hover:bg-green-600 text-white rounded text-xs",children:"OK"})]})]})]}),!n&&e&&"bank"!==e.ownerId&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-600 flex flex-col gap-2",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-1",children:T({en:"Offer to Buy",vi:"ƒê·ªÅ ngh·ªã mua l·∫°i"})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"number",placeholder:k({en:"Price",vi:"Gi√°"}),className:"flex-1 bg-slate-700 text-white text-xs rounded p-1 outline-none",id:"buy-price-input"}),s.jsx("button",{onClick:()=>{const t=document.getElementById("buy-price-input"),s=parseInt(t.value);!isNaN(s)&&s>0&&(y.requestOfferTrade(e.ownerId,B.id,s),A(null))},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white rounded text-xs",children:T({en:"Send Offer",vi:"G·ª≠i ƒë·ªÅ ngh·ªã"})})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[n&&"property"===B.type&&B.color&&B.houseCost&&s.jsx("div",{className:"flex-1",children:(()=>{const e=y.canBuildHouse(f,B.id);return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("button",{disabled:!e.allowed||!X,onClick:()=>{e.allowed&&X&&(y.requestBuildHouse(B.id),A(null))},className:"w-full px-3 py-2 rounded-lg text-sm transition-colors "+(e.allowed&&X?"bg-green-600 hover:bg-green-500 text-white":"bg-green-900/50 text-gray-400 cursor-not-allowed"),children:[T({en:"Build House",vi:"X√¢y nh√†"})," (",B.houseCost?B.houseCost.toLocaleString():0,"ƒë)"]}),(!e.allowed||!X)&&s.jsx("p",{className:"text-[10px] text-red-400 text-center leading-tight",children:T(e.reason||k({en:"Wait for your turn",vi:"ƒê·ª£i t·ªõi l∆∞·ª£t c·ªßa b·∫°n"}))})]})})()}),s.jsx("button",{onClick:()=>A(null),className:"flex-1 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-sm",children:T({en:"Close",vi:"ƒê√≥ng"})})]})]})})})(),s.jsx("button",{onClick:()=>q(!0),className:"fixed bottom-4 right-4 z-40 bg-slate-800 hover:bg-slate-700 text-white p-3 rounded-full shadow-xl border border-slate-600 transition-transform hover:scale-110",title:T({en:"Game Rules",vi:"Lu·∫≠t Ch∆°i"}),children:s.jsx(l,{className:"w-6 h-6 text-yellow-500"})})]})}export{f as default};
